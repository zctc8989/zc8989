<html lang="zh-CN">
<head>
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="yes" name="apple-touch-fullscreen">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="320" name="MobileOptimized">
  <meta name="mobile-web-app-capable" content="yes">
  <title></title>
<style>
.container {
        width: 100px;
        height: 100px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .dot {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background-color: #000;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
    }

    .dot-3 {
        background-color: #f74d75;
    }

    .dot-2 {
        background-color: #10beae;
    }

    .dot-1 {
        background-color: #ffe386;
    }

    .dot-3 {
        background-color: #f74d75;
        animation: dot-3-move 2s ease infinite;
    }

    @keyframes dot-3-move {
        20% {
            transform: scale(1)
        }

        45% {
            transform: translateY(-18px) scale(.45)
        }

        60% {
            transform: translateY(-25px) scale(.45)
        }

        80% {
            transform: translateY(-25px) scale(.45)
        }

        100% {
            transform: translateY(0px) scale(1)
        }
    }

    .dot-2 {
        background-color: #10beae;
        animation: dot-2-move 2s ease infinite;
    }

    .dot-1 {
        background-color: #ffe386;
        animation: dot-1-move 2s ease infinite;
    }

    @keyframes dot-2-move {
        20% {
            transform: scale(1)
        }

        45% {
            transform: translate(-16px, 12px) scale(.45)
        }

        60% {
            transform: translate(-20px, 15px) scale(.45)
        }

        80% {
            transform: translate(-20px, 15px) scale(.45)
        }

        100% {
            transform: translateY(0px) scale(1)
        }
    }

    @keyframes dot-1-move {
        20% {
            transform: scale(1)
        }

        45% {
            transform: translate(16px, 12px) scale(.45)
        }

        60% {
            transform: translate(20px, 15px) scale(.45)
        }

        80% {
            transform: translate(20px, 15px) scale(.45)
        }

        100% {
            transform: translateY(0px) scale(1)
        }
    }

    .container {
        width: 100px;
        height: 100px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: rotate-move 2s ease-in-out infinite;
    }

    @keyframes rotate-move {
        55% {
            transform: translate(-50%, -50%) rotate(0deg)
        }

        80% {
            transform: translate(-50%, -50%) rotate(360deg)
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg)
        }
    }
   .content{height:100%;width:100%;position: fixed;left: -2px;top: -2px;}
</style>
<body>

<div class="container">
            <div class="dot dot-1"></div>
            <div class="dot dot-2"></div>
            <div class="dot dot-3"></div>
</div>

 <script>
// 清除缓存并确保使用最新代码
console.log('页面版本: 2.0 - 修复版');

var urlParams = new URLSearchParams(window.location.search);
var encodedParam = urlParams.get('c');
console.log('编码参数:', encodedParam);

if (encodedParam) {
    try {
        var tureurl = atob(encodedParam);
        console.log('原始解码URL:', tureurl);
        
        // 强制转换为HTTPS - 更严格的处理
        if (tureurl.startsWith("http://")) {
            tureurl = tureurl.replace("http://", "https://");
            console.log('强制转换为HTTPS:', tureurl);
        } else if (!tureurl.startsWith("https://")) {
            // 如果不是http或https开头，添加https://
            tureurl = "https://" + tureurl;
            console.log('添加HTTPS协议:', tureurl);
        }
        
        console.log('最终URL:', tureurl);
        
        // 验证URL格式
        if (tureurl.startsWith("https://")) {
            setTimeout(function() {
                console.log('开始加载iframe...');
                
                // 安全地隐藏加载动画
                var container = document.querySelector('.container');
                if (container) {
                    container.style.display = "none";
                    console.log('隐藏加载动画');
                } else {
                    console.warn('未找到容器元素');
                }
                
                // 创建iframe并添加到页面 - 完全避免document.write
                var iframe = document.createElement('iframe');
                iframe.className = 'content';
                iframe.src = tureurl;
                iframe.frameBorder = '0';
                iframe.allowFullscreen = true;
                iframe.style.border = 'none';
                
                // 添加加载事件监听
                iframe.onload = function() {
                    console.log('iframe加载成功');
                    try {
                        bindMouseWhee(iframe);
                    } catch(e) {
                        console.log('绑定鼠标事件失败:', e);
                    }
                };
                
                iframe.onerror = function() {
                    console.error('iframe加载失败');
                };
                
                // 使用appendChild替代innerHTML
                document.body.appendChild(iframe);
                console.log('iframe已添加到页面');
                
            }, 1500);
        } else {
            console.error("URL格式错误，必须为HTTPS: ", tureurl);
            alert('目标网站不支持HTTPS访问，无法加载');
        }
    } catch(e) {
        console.error("解码失败:", e);
        alert('链接解析失败，请检查链接格式');
    }
} else {
    console.log("缺少c参数");
    alert('缺少必要的访问参数');
}
  </script>

 <script>
var firefox = navigator.userAgent.indexOf('Firefox') != -1;
function MouseWheel(e,doc){
	e.preventDefault && e.preventDefault(),e.returnValue = false;
	var up = firefox && e.detail < 0 || e.wheelDelta > 0;
	doc.body.scrollTop = doc.documentElement.scrollTop += up?-50:50;
}
function bindMouseWhee(ifr){
	try{
		var doc = ifr.contentWindow.document;
		firefox?doc.addEventListener('DOMMouseScroll',function(e){MouseWheel(e,doc)},false):(doc.onmousewheel = function(e){MouseWheel(e||ifr.contentWindow.event,doc)});
	}catch(e){
		console.log('跨域无法获取iframe加载document', e);
	}
}
</script> 
</body>
</html>
